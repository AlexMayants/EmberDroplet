<<<<<<< HEAD
/*! EmberDroplet by Adam Timberlake created on 2013-06-17 */
window.EmberDropletController=Ember.Mixin.create({mimeTypes:["image/jpeg","image/jpg","image/gif","image/png","text/plain"],files:[],init:function(){Ember.set(this,"files",[]),this._super()},addValidFile:function(a){return this._addFile(a,!0)},addInvalidFile:function(a){return this._addFile(a,!1)},removeFile:function(a){return Ember.set(a,"deleted",!0),a},clearAllFiles:function(){Ember.set(this,"files",[])},uploadAllFiles:function(){var a=Ember.get(this,"dropletUrl");Ember.assert("You must specify the `dropletUrl` parameter in order to upload files.",!!a);var b=new XMLHttpRequest;b.open("post",a,!0);var c=new FormData,d=0,e=Ember.get(this,"validFiles");Ember.EnumerableUtils.forEach(e,function(a){d+=a.size,c.append("file",a.file)},this),b.addEventListener("load",function(){Ember.EnumerableUtils.forEach(e,function(a){Ember.set(a,"uploaded",!0)})}.bind(e),!1),b.setRequestHeader("X-File-Size",d),b.send(c)},_addFile:function(a,b){var c="extension-%@".fmt(a.name.match(/\.(.+)$/i)[1]),d={file:a,valid:b,uploaded:!1,deleted:!1,className:c};return Ember.get(this,"files").pushObject(d),d},validFiles:Ember.computed(function(){return this._filesByProperties({valid:!0,deleted:!1,uploaded:!1})}).property("files.length","files.@each.deleted","files.@each.uploaded"),invalidFiles:Ember.computed(function(){return this._filesByProperties({valid:!1})}).property("files.length","files.@each.deleted"),uploadedFiles:Ember.computed(function(){return this._filesByProperties({uploaded:!0})}).property("files.length","files.@each.uploaded"),deletedFiles:Ember.computed(function(){return this._filesByProperties({deleted:!0})}).property("files.length","files.@each.deleted"),_filesByProperties:function(a){return Ember.get(this,"files").filter(function(b){for(var c in a)if(b[c]!==a[c])return!1;return!0})}}),window.EmberDropletView=Ember.View.extend({classNames:["droppable"],ImagePreview:Ember.View.extend({tagName:"img",attributeBindings:["src"],src:null,image:null,didInsertElement:function(){var a=new FileReader,b=Ember.get(this,"image.file");return b.type.match(/^image\//i)?(a.onload=function(a){this.get("isDestroyed")!==!0&&Ember.set(this,"src",a.target.result)}.bind(this),a.readAsDataURL(b),void 0):(this.destroy(),void 0)}}),drop:function(a){return this._preventDefaultBehaviour(a),this.traverseFiles(a.dataTransfer.files)},traverseFiles:function(a){var b=Ember.get(this,"controller"),c=Ember.get(b,"mimeTypes");Ember.assert("`mimeTypes` is undefined. Does your controller implement the `EmberDropletController` mixin?",!!c),Ember.assert("`mimeTypes` is not an array. It should be an array of valid MIME types.",!!Ember.isArray(c));for(var d=0,e=a.length;e>d;d++)if(a.hasOwnProperty(d)){var f=a[d];-1!==$.inArray(f.type,c)?b.addValidFile(f):b.addInvalidFile(f)}return!0},_preventDefaultBehaviour:function(a){a.preventDefault(),a.stopPropagation()},dragOver:function(a){this._preventDefaultBehaviour(a)},dragEnter:function(a){this._preventDefaultBehaviour(a)},dragLeave:function(a){this._preventDefaultBehaviour(a)}});
=======
/*! EmberDroplet by Adam Timberlake created on 2013-06-12 */
window.EmberDropletController=Ember.Mixin.create({mimeTypes:["image/jpeg","image/jpg","image/gif","image/png","text/plain"],files:[],init:function(){Ember.set(this,"files",[]),this._super()},addValidFile:function(a){return this._addFile(a,!0)},addInvalidFile:function(a){return this._addFile(a,!1)},deleteFile:function(a){return Ember.set(a,"deleted",!0),a},clearAllFiles:function(){Ember.set(this,"files",[])},uploadAllFiles:function(a){a=a||Ember.get(this,"validFiles"),Ember.EnumerableUtils.forEach(a,function(a){this.uploadFile(a)},this)},uploadFile:function(a){var b=Ember.get(this,"dropletUrl");Ember.assert("You must specify the `dropletUrl` parameter in order to upload files.",!!b);var c=new XMLHttpRequest;c.open("post",b,!0);var d=a.file;c.addEventListener("load",function(){Ember.set(a,"uploaded",!0)}.bind(a),!1),c.setRequestHeader("X-File-Name",d.name),c.setRequestHeader("X-File-Size",d.size),c.setRequestHeader("X-File-Type",d.type);var e=new FormData;e.append("file",d),c.send(e)},_addFile:function(a,b){var c="extension-%@".fmt(a.name.match(/\.(.+)$/i)[1]),d={file:a,valid:b,uploaded:!1,deleted:!1,className:c};return Ember.get(this,"files").pushObject(d),d},validFiles:Ember.computed(function(){return this._filesByProperties({valid:!0,deleted:!1,uploaded:!1})}).property("files.length","files.@each.deleted","files.@each.uploaded"),invalidFiles:Ember.computed(function(){return this._filesByProperties({valid:!1})}).property("files.length","files.@each.deleted"),uploadedFiles:Ember.computed(function(){return this._filesByProperties({uploaded:!0})}).property("files.length","files.@each.uploaded"),deletedFiles:Ember.computed(function(){return this._filesByProperties({deleted:!0})}).property("files.length","files.@each.deleted"),_filesByProperties:function(a){return Ember.get(this,"files").filter(function(b){for(var c in a)if(b[c]!==a[c])return!1;return!0})}}),window.EmberDropletView=Ember.View.extend({classNames:["droppable"],ImagePreview:Ember.View.extend({tagName:"img",attributeBindings:["src"],src:null,image:null,didInsertElement:function(){var a=new FileReader,b=Ember.get(this,"image.file");return b.type.match(/^image\//i)?(a.onload=function(a){this.get("isDestroyed")!==!0&&Ember.set(this,"src",a.target.result)}.bind(this),a.readAsDataURL(b),void 0):(this.destroy(),void 0)}}),drop:function(a){return this._preventDefaultBehaviour(a),this.traverseFiles(a.dataTransfer.files)},traverseFiles:function(a){var b=Ember.get(this,"controller"),c=Ember.get(b,"mimeTypes");Ember.assert("`mimeTypes` is undefined. Does your controller implement the `EmberDropletController` mixin?",!!c),Ember.assert("`mimeTypes` is not an array. It should be an array of valid MIME types.",!!Ember.isArray(c));for(var d=0,e=a.length;e>d;d++)if(a.hasOwnProperty(d)){var f=a[d];-1!==$.inArray(f.type,c)?b.addValidFile(f):b.addInvalidFile(f)}return!0},_preventDefaultBehaviour:function(a){a.preventDefault(),a.stopPropagation()},dragOver:function(a){this._preventDefaultBehaviour(a)},dragEnter:function(a){this._preventDefaultBehaviour(a)},dragLeave:function(a){this._preventDefaultBehaviour(a)}});
>>>>>>> 66ce0fde399b455dd09f9c639f9ce0e138dd5a60
